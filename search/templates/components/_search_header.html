<!-- Modern Search Header Component - Mobile First -->
<div class="search-header bg-gradient-primary text-white py-3 py-md-4 mb-3 mb-md-4">
  <div class="container">
    <!-- Mobile Header -->
    <div class="d-md-none">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h1 class="h5 mb-0 fw-bold">
          <i class="fas fa-search me-2"></i>
          {% if term %}Busca{% else %}Anúncios{% endif %}
        </h1>
        {% if page_obj %}
        <span class="badge bg-white bg-opacity-20 px-3 py-2 rounded-pill">
          {{ page_obj.paginator.count }} encontrados
        </span>
        {% endif %}
      </div>
      
      {% if term %}
      <p class="mb-2 opacity-90">
        <i class="fas fa-quote-left me-1"></i>
        {{ term }}
        <i class="fas fa-quote-right ms-1"></i>
      </p>
      {% endif %}
      
      <p class="small mb-0 opacity-75">
        {% if page_obj %}
        Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}
        {% else %}
        Encontre necessidades próximas a você
        {% endif %}
      </p>
    </div>

    <!-- Desktop Header -->
    <div class="d-none d-md-block text-center">
      <h1 class="h3 fw-bold mb-3">
        <i class="fas fa-search me-2"></i>
        {% if term %}Resultados para "{{ term }}"{% else %}Buscar Anúncios{% endif %}
      </h1>
      
      <p class="mb-0 opacity-90 lead">
        {% if page_obj %}
        {{ page_obj.start_index }}–{{ page_obj.end_index }} de {{ page_obj.paginator.count }} resultados
        {% if state != 'todos' and state != 'TODOS' %}em {{ state|upper }}{% endif %}
        {% else %}
        Encontre necessidades e oportunidades próximas a você
        {% endif %}
      </p>
    </div>
  </div>
</div>

<!-- Search Form Mobile (Campo principal full-width) -->
<div class="d-md-none mb-3">
  <div class="container">
    <form method="get" action="{% url 'search:necessidade_search_all' %}" class="search-form-mobile">
      <div class="input-group input-group-lg">
        <span class="input-group-text bg-white border-end-0">
          <i class="fas fa-search text-primary"></i>
        </span>
        <input type="text" 
               name="q" 
               class="form-control border-start-0" 
               placeholder="Buscar anúncios..." 
               value="{{ term }}"
               autocomplete="off">
        <button type="submit" class="btn btn-primary px-4">
          <i class="fas fa-search"></i>
        </button>
      </div>
      
      <!-- Preserve current filters -->
      {% if state and state != 'todos' %}
      <input type="hidden" name="state" value="{{ state }}">
      {% endif %}
      {% if local %}
      <input type="hidden" name="local" value="{{ local }}">
      {% endif %}
      {% if lat %}
      <input type="hidden" name="lat" value="{{ lat }}">
      <input type="hidden" name="lon" value="{{ lon }}">
      {% endif %}
    </form>
  </div>
</div>

<style>
.search-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  position: relative;
  overflow: hidden;
}

.search-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.1);
  z-index: 1;
}

.search-header .container {
  position: relative;
  z-index: 2;
}

.search-form-mobile .form-control {
  border-radius: 0;
  padding: 1rem;
  font-size: 1.1rem;
}

.search-form-mobile .form-control:focus {
  border-color: var(--bs-primary);
  box-shadow: none;
}

.search-form-mobile .input-group-text {
  border-radius: 0.5rem 0 0 0.5rem;
}

.search-form-mobile .btn {
  border-radius: 0 0.5rem 0.5rem 0;
}

@media (max-width: 767px) {
  .search-header {
    border-radius: 0;
    margin-left: -15px;
    margin-right: -15px;
    width: calc(100% + 30px);
  }
  
  .search-form-mobile {
    margin-top: 0.5rem;
  }
}
</style>